<div class="space-y-4">
  <!-- Chart Header -->
  <div class="flex items-center justify-between">
    <div>
      <h2 class="text-2xl font-bold">{{ title }}</h2>
      <p class="text-sm text-muted-foreground">{{ description }}</p>
    </div>
    <div class="flex items-center space-x-2">
      <!-- Chart Type Selector -->
      <select
        *ngIf="showTypeSelector"
        class="rounded-md border border-input bg-background px-3 py-2"
        [value]="type"
        (change)="changeType($event)"
      >
        <option *ngFor="let type of availableTypes" [value]="type">
          {{ type | titlecase }}
        </option>
      </select>
      <!-- Download Button -->
      <app-button
        *ngIf="showDownload"
        variant="muted"
        size="sm"
        (onClick)="downloadChart()"
      >
        Download
      </app-button>
      <!-- Custom Actions -->
      <ng-content select="[chartActions]"></ng-content>
    </div>
  </div>

  <!-- Loading State -->
  <app-loading-state *ngIf="isLoading" [message]="loadingMessage"></app-loading-state>

  <!-- Empty State -->
  <app-empty-state
    *ngIf="!isLoading && !datasets.length"
    [title]="emptyStateTitle"
    [description]="emptyStateMessage"
    [action]="emptyStateAction"
  ></app-empty-state>

  <!-- Chart Content -->
  <div *ngIf="!isLoading && datasets.length" class="space-y-4">
    <!-- Chart Container -->
    <div
      class="relative rounded-lg border bg-card p-4"
      [style.height.px]="height"
    >
      <canvas #chartCanvas></canvas>
    </div>

    <!-- Chart Legend -->
    <div
      *ngIf="showLegend"
      class="flex flex-wrap items-center justify-center gap-4"
    >
      <div
        *ngFor="let dataset of datasets"
        class="flex items-center space-x-2"
      >
        <div
          class="h-3 w-3 rounded-full"
          [style.background-color]="dataset.backgroundColor"
        ></div>
        <span class="text-sm">{{ dataset.label }}</span>
      </div>
    </div>
  </div>
</div> 